<!doctype html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title }} - Dev Command Center</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/button-glass.css') }}">

    <!-- Premium very-dark theme overrides -->
    <style>
        :root[data-bs-theme='dark'] {
            --bs-body-bg: #070b10;
            --bs-body-color: #d6d9de;
            --bs-tertiary-bg: #090d12;
            --bs-secondary-bg: #0b1118;
            --bs-card-bg: #0c1219;
            --bs-border-color: #1a2430;
            --bs-border-color-translucent: rgba(26, 36, 48, .6);
            --bs-primary: #1e5bb8;
            --bs-secondary: #6c757d;
            --bs-success: #198754;
            --bs-info: #2a829f;
            --bs-warning: #b58600;
            --bs-danger: #a23a3a;
            --bs-light: #1b232d;
            --bs-dark: #0b1118;
            --bs-link-color: #59a3ff;
            --bs-link-hover-color: #8abfff;
        }

        body {
            background-color: var(--bs-body-bg);
            color: var(--bs-body-color);
        }

        .bg-dark {
            background-color: var(--bs-dark) !important;
        }

        .card {
            background-color: var(--bs-card-bg);
            border-color: var(--bs-border-color);
        }

        .modal-content,
        .dropdown-menu,
        .toast {
            background-color: var(--bs-card-bg);
            border-color: var(--bs-border-color);
        }

        .bg-body-secondary {
            background-color: var(--bs-secondary-bg) !important;
        }

        .form-control,
        .form-select,
        .form-control:focus,
        .form-select:focus {
            background-color: var(--bs-secondary-bg);
            color: var(--bs-body-color);
            border-color: var(--bs-border-color);
        }

        .btn-primary {
            background-color: var(--bs-primary);
            border-color: var(--bs-primary);
        }

        .btn-outline-primary {
            color: var(--bs-primary);
            border-color: var(--bs-primary);
        }

        .btn-outline-primary:hover {
            background-color: rgba(30, 91, 184, .15);
        }

        .navbar,
        .dropdown-menu {
            border-color: var(--bs-border-color);
        }

        .border-body {
            border-color: var(--bs-border-color) !important;
        }
    </style>
</head>

<body class="bg-body-tertiary">
    <div id="particles-js" style="min-height: 100vh; min-width: 100vw;"></div>

    <!-- Simple Centered Login Layout -->
    <div class="container-fluid">
        <div class="row justify-content-center align-items-center" style="min-height: 100vh;">
            <div class="col-md-6 col-lg-4">
                <div class="text-center mb-4">
                    <a href="{{ url_for('main.index') }}" class="text-decoration-none">
                        <h1 class="display-4 fw-bold text-primary">
                            <i class="bi bi-lightbulb"></i> Sophia
                        </h1>
                    </a>
                    <p class="text-muted">Your AI-Powered Knowledge Base</p>
                </div>

                <div class="card shadow-lg">
                    <div class="card-body p-4">
                        <h2 class="card-title text-center mb-4">Sign In</h2>
                        <form action="" method="post" novalidate>
                            {{ form.hidden_tag() }}
                            <div class="mb-3">
                                {{ form.username.label(class="form-label") }}
                                {{ form.username(class="form-control" + (" is-invalid" if form.username.errors else ""),
                                size=32) }}
                                {% for error in form.username.errors %}
                                <div class="invalid-feedback">{{ error }}</div>
                                {% endfor %}
                            </div>
                            <div class="mb-3">
                                {{ form.password.label(class="form-label") }}
                                {{ form.password(class="form-control" + (" is-invalid" if form.password.errors else ""),
                                size=32) }}
                                {% for error in form.password.errors %}
                                <div class="invalid-feedback">{{ error }}</div>
                                {% endfor %}
                            </div>
                            <div class="mb-3 form-check">
                                {{ form.remember_me(class="form-check-input") }}
                                {{ form.remember_me.label(class="form-check-label") }}
                            </div>
                            <div class="d-grid">
                                {{ form.submit(class="btn btn-primary", id="submit-button") }}
                            </div>
                            <p class="mt-3 text-center">
                                New User? <a href="{{ url_for('main.register') }}">Click to Register!</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Initialize particles
        particlesJS('particles-js', {
            "particles": {
                "number": {
                    "value": 80,
                    "density": {
                        "enable": true,
                        "value_area": 800
                    }
                },
                "color": {
                    "value": "#ffffff"
                },
                "shape": {
                    "type": "circle"
                },
                "opacity": {
                    "value": 0.5,
                    "random": false
                },
                "size": {
                    "value": 3,
                    "random": true
                },
                "line_linked": {
                    "enable": true,
                    "distance": 150,
                    "color": "#ffffff",
                    "opacity": 0.4,
                    "width": 1
                },
                "move": {
                    "enable": true,
                    "speed": 6,
                    "direction": "none",
                    "random": false,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": {
                        "enable": true,
                        "mode": "repulse"
                    },
                    "onclick": {
                        "enable": true,
                        "mode": "push"
                    },
                    "resize": true
                }
            },
            "retina_detect": true
        });

        // Form submission handling
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.querySelector('form');
            const submitButton = document.getElementById('submit-button');

            if (form && submitButton) {
                form.addEventListener('submit', () => {
                    submitButton.disabled = true;
                    submitButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Signing In...';
                });
            }
        });
    </script>
</body>

</html>